{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"\ud83d\udd4a\ufe0f Nomad Wealth Documentation","text":"<p>Welcome to Nomad Wealth, the Python framework for transparent financial forecasting. If you\u2019ve ever used financial planning tools and felt like you couldn\u2019t see the assumptions behind the numbers, you\u2019re not alone. Many systems give you results but don\u2019t show how they were calculated, leaving you guessing about what\u2019s really driving the forecast.  </p> <p>Nomad Wealth is different. Every rule is explicit, every tax calculation is IRS\u2011aligned, and every simulation is reproducible. Instead of wondering what\u2019s hidden, you can trace each dollar across buckets, policies, and scenarios. That means you don\u2019t just get a projection \u2014 you get clarity, confidence, and the ability to understand why the numbers look the way they do.  </p> <p>Whether you\u2019re planning retirement, testing \u201cwhat\u2011if\u201d scenarios, or simply checking if you\u2019re on track, Nomad Wealth helps you see clearly, adjust confidently, and trust the outcomes.  </p>"},{"location":"#getting-started","title":"\ud83d\ude80 Getting Started","text":"<p>Run your first retirement forecast in minutes with the Quick Start.  </p> <p>Want to understand how it all works under the hood? Begin with the Framework Overview to see the design principles and how the system fits together.  </p> <p> </p>"},{"location":"#documentation-structure","title":"\ud83d\udcda Documentation Structure","text":"<ul> <li>Framework Overview \u2192 Why Nomad Wealth exists and how it helps you plan retirement with confidence.  </li> <li>Configuration Reference \u2192 How to set up your plan inputs (buckets, policies, balances).  </li> <li>Architecture Overview \u2192 Behind\u2011the\u2011scenes look at how the system runs (for advanced users).  </li> <li>Simulation Logic \u2192 How forecasts are calculated and what Monte Carlo means for your plan.  </li> <li>Visualization Guide \u2192 How to read charts and reports to understand your retirement outlook.  </li> <li>Usage Guide \u2192 Step\u2011by\u2011step instructions to run forecasts and interpret results.  </li> </ul> <p>Each section emphasizes transparency and reproducibility, so you can trust that every forecast is IRS\u2011aligned and defensible.  </p>"},{"location":"#design-philosophy","title":"\ud83c\udfaf Design Philosophy","text":"<p>Nomad Wealth is built around:  </p> <ul> <li>Policy\u2011First \u2192 Your plan follows clear, rule\u2011based logic.  </li> <li>Audit Clarity \u2192 Every forecast is traceable, so you can trust the numbers.  </li> <li>IRS Alignment \u2192 Tax rules and penalties are modeled exactly as they apply to you.  </li> <li>Resilience \u2192 Monte Carlo simulations show how your plan holds up under uncertainty.  </li> <li>Transparency \u2192 Charts and reports make it easy to see what\u2019s happening.  </li> <li>Extensibility \u2192 Advanced users can customize rules, but you don\u2019t need to for core planning.  </li> </ul>"},{"location":"#next-steps","title":"\ud83d\udcda Next Steps","text":"<p>\ud83d\udc49 Start with the Framework Overview to see how Nomad Wealth helps you plan with confidence. From there, follow the flow: Configuration \u2192 Simulation \u2192 Visualization \u2192 Usage to set up your plan, run forecasts, and understand your retirement outlook.  </p>"},{"location":"architecture/","title":"\ud83c\udfdb\ufe0f Architecture Overview","text":"<p>Nomad Wealth is a policy\u2011driven Monte Carlo simulation framework for financial planning. Its architecture is designed for clarity, transparency, and extensibility, ensuring that every projection, chart, and policy reflects IRS rules and produces trustworthy results.  </p>"},{"location":"architecture/#highlevel-design","title":"\ud83d\udd0d High\u2011Level Design","text":"<p>Nomad Wealth is built from modular components that work together to run forecasts and generate charts:  </p> <ul> <li>Entry Point (<code>app.py</code>) \u2192 starts the process: loads your configuration, runs simulations, and produces outputs.  </li> <li>Forecast Engine (<code>forecast_engine.py</code>) \u2192 runs the monthly forecast loop, applying transactions, policies, market returns, and taxes.  </li> <li>Buckets &amp; Holdings (<code>buckets.py</code>) \u2192 represent your accounts and investments.  </li> <li>Policies (<code>policy_engine.py</code>, <code>policies_transactions.py</code>) \u2192 enforce rules like refills, income deposits, conversions, withdrawals, RMDs, SEPPs, and unemployment.</li> <li>Transactions (<code>rules_transactions.py</code>) \u2192 handle fixed and recurring expenses.  </li> <li>Economic Factors (<code>economic_factors.py</code>) \u2192 simulate inflation and market returns based on historical data.  </li> <li>Taxes (<code>taxes.py</code>) \u2192 apply IRS\u2011compliant tax rules for income, gains, and Social Security.  </li> <li>Visualization (<code>visualizations.py</code>) \u2192 generate charts and exports that make your plan easy to understand.</li> <li>Load Data (<code>load_data.py</code>) \u2192 loads CSV and JSON files for simulation and visualization.</li> <li>FlowTracker (<code>audit.py</code>) \u2192 records every debit and credit for transparency.</li> </ul>"},{"location":"architecture/#data-flow","title":"\ud83d\udcc2 Data Flow","text":"<p>Here\u2019s how information moves through the system:  </p> <ol> <li> <p>Configuration Loading </p> <ul> <li>JSON files define your buckets, policies, tax brackets, and simulation settings.  </li> <li>CSV files provide starting balances and transactions.  </li> </ul> </li> <li> <p>Staging </p> <ul> <li>Loads all inputs (balances, fixed events, recurring expenses, policies, tax brackets, inflation, healthcare premiums).  </li> <li>Prepares historical and future timeframes.  </li> <li>Seeds buckets, policies, inflation, tax logic, and transactions.  </li> <li>Helper functions ensure balances are correct, inflation is applied consistently, and performance is logged.  </li> </ul> </li> <li> <p>Parallel Simulation Loop (Forecast Engine) </p> <ul> <li>Runs Monte Carlo trials in parallel for efficiency.  </li> <li>Each trial applies monthly transactions, policies, market returns, and taxes.  </li> <li>FlowTracker records every debit and credit for transparency.  </li> </ul> </li> <li> <p>Aggregation &amp; Summary </p> <ul> <li>Results are combined into net worth, taxes, balances, and returns.  </li> <li>Property events and compliance checks are tracked.  </li> </ul> </li> <li> <p>Visualization Layer </p> <ul> <li>Produces charts showing monthly details, aggregate distributions, and historical trends.  </li> <li>All charts can be exported to HTML and CSV for easy sharing and reproducibility.  </li> </ul> </li> </ol>"},{"location":"architecture/#irs-compliance","title":"\ud83e\uddfe IRS Compliance","text":"<p>Nomad Wealth enforces IRS rules so your forecasts reflect reality:  </p> <ul> <li>Ordinary income brackets inflated annually.  </li> <li>Capital gains layered above ordinary income.  </li> <li>Social Security capped at 85% of provisional income.  </li> <li>Penalty taxes applied only when rules require it.  </li> <li>AGI includes salary, withdrawals, conversions, gains, and Social Security.  </li> <li>Taxable income calculated after deductions.  </li> <li>Inflation modeled stochastically, anchored to a base year.  </li> </ul>"},{"location":"architecture/#visualization-integration","title":"\ud83d\udcca Visualization Integration","text":"<p>Visualization is built into the simulation loop, so you always see clear results:  </p> <ul> <li>Historical context \u2192 charts of bucket growth and net worth trends.  </li> <li>Per\u2011trial transparency \u2192 detailed monthly expenses, transactions, taxes, and forecasts.  </li> <li>Aggregate clarity \u2192 distributions of returns, balances, taxes, and net worth across Monte Carlo trials.  </li> <li>Reproducibility \u2192 charts exportable to HTML/CSV with consistent colors, overlays, and hover text.  </li> </ul>"},{"location":"architecture/#design-principles","title":"\ud83c\udfaf Design Principles","text":"<ul> <li>Policy\u2011First \u2192 all financial rules are transparent and repeatable.  </li> <li>Clarity \u2192 every dollar is traceable across buckets and scenarios.  </li> <li>Extensibility \u2192 modular design supports new rules and transaction types.  </li> <li>Resilience \u2192 Monte Carlo sampling shows how your plan holds up under uncertainty.  </li> <li>Parallelism \u2192 simulations run efficiently at scale.  </li> <li>Integrity \u2192 helper functions enforce correctness and reproducibility.  </li> </ul>"},{"location":"architecture/#related-pages","title":"\ud83d\udcda Related Pages","text":"<ul> <li>Framework Overview </li> <li>Configuration Reference </li> <li>Simulation Logic </li> <li>Visualization Guide </li> <li>Usage Guide</li> </ul>"},{"location":"configuration/","title":"\u2699\ufe0f Configuration Reference","text":"<p>Nomad Wealth is policy\u2011first: all simulation behavior is driven by configuration files. These files represent your accounts (i.e., buckets), income, expenses, and policies \u2014 the building blocks of your retirement plan. By adjusting them, you can personalize forecasts, explore scenarios, and see how IRS rules and inflation shape your financial future.</p>"},{"location":"configuration/#getting-started-levels-of-personalization","title":"\ud83d\udd11 Getting Started: Levels of Personalization","text":""},{"location":"configuration/#basic","title":"BASIC","text":"<p>Minimum inputs to run your own forecast:  </p> <ul> <li><code>profile.json</code> \u2192 sets your birth month, income assumptions, and retirement horizon.  </li> <li><code>balance.csv</code> \u2192 starting balances for each bucket.  </li> <li><code>recurring.csv</code> \u2192 ongoing monthly expenses (insurance, food, utilities).  </li> <li><code>fixed.csv</code> \u2192 one\u2011time events (tuition, travel).  </li> </ul>"},{"location":"configuration/#recommended","title":"RECOMMENDED","text":"<p>Add details for more realistic results:  </p> <ul> <li><code>buckets.json</code> \u2192 defines your buckets and sub\u2011holdings.  </li> <li><code>policies.json</code> \u2192 income streams (salary, Social Security), property details, unemployment.  </li> <li><code>tax_brackets.json</code> \u2192 IRS\u2011aligned federal and Oregon state brackets.  </li> <li><code>marketplace_premiums.json</code> \u2192 healthcare premiums for marketplace plans.  </li> </ul>"},{"location":"configuration/#advanced","title":"ADVANCED","text":"<p>Fine\u2011tune rules for deeper scenario analysis:  </p> <ul> <li><code>buckets.json</code> \u2192 customize holdings to reflect your investment strategy.  </li> <li><code>policies.json</code> \u2192 add refill rules, liquidation hierarchy, Roth conversions, SEPP withdrawals.  </li> <li><code>inflation_rates.json</code> \u2192 category\u2011specific inflation (healthcare, rent, travel).  </li> <li><code>inflation_thresholds.json</code> + <code>gain_table.json</code> \u2192 asset class return regimes for Monte Carlo sampling.  </li> </ul>"},{"location":"configuration/#json-configuration","title":"\ud83d\udcc2 JSON Configuration","text":""},{"location":"configuration/#profiles","title":"Profiles","text":"<p>Profiles set your retirement horizon and income assumptions, so the system can calculate eligibility, Medicare premiums, and sufficiency.  </p> <p>Example (<code>profile.json</code>):</p> <pre><code>{\n  \"Birth Month\": \"1975-04\",\n  \"End Month\": \"2065-12\",\n  \"MAGI\": {\n    \"2023\": 200000,\n    \"2024\": 204000,\n    \"2025\": 208000\n  }\n}\n</code></pre>"},{"location":"configuration/#profiles-field-definitions","title":"\ud83d\udd11 Profiles Field Definitions","text":"<ul> <li>Birth Month \u2192 start of simulation, expressed as <code>YYYY-MM</code>.</li> <li>End Month \u2192 end of simulation horizon, expressed as <code>YYYY-MM</code>.</li> <li>MAGI \u2192 dictionary of Modified Adjusted Gross Income values by year.<ul> <li>Keys are years (<code>2023</code>, <code>2024</code>, <code>2025</code>).</li> <li>Values are annual MAGI amounts.</li> <li>Used for IRMAA premium calculations and tax logic.</li> </ul> </li> </ul>"},{"location":"configuration/#profiles-audit-notes","title":"\ud83e\uddfe Profiles Audit Notes","text":"<ul> <li>Birth Month is used to calculate retirement eligibility (e.g., age 59.5 for penalty\u2011free withdrawals).</li> <li>End Month defines the final forecast period.</li> <li>MAGI values feed into IRMAA thresholds and Medicare premium adjustments.</li> <li>All dates are parsed into <code>pandas.Period(\"M\")</code> for monthly granularity.</li> <li>Audit clarity: profiles must be updated annually to reflect current MAGI values.</li> </ul>"},{"location":"configuration/#buckets","title":"Buckets","text":"<p>Buckets represent your accounts \u2014 cash, brokerage, retirement, property \u2014 and define how money grows or is spent.  </p> <p>Example (<code>buckets.json</code>):</p> <pre><code>{\n  \"Cash\": {\n    \"holdings\": [{ \"asset_class\": \"Cash\", \"weight\": 1.0 }],\n    \"can_go_negative\": true,\n    \"allow_cash_fallback\": false,\n    \"bucket_type\": \"cash\"\n  },\n  \"CD Ladder\": {\n    \"holdings\": [\n      { \"asset_class\": \"Fixed-Income\", \"weight\": 0.995 },\n      { \"asset_class\": \"Cash\", \"weight\": 0.005 }\n    ],\n    \"can_go_negative\": false,\n    \"allow_cash_fallback\": false,\n    \"bucket_type\": \"taxable\"\n  },\n  \"Brokerage\": {\n    \"holdings\": [\n      { \"asset_class\": \"Fixed-Income\", \"weight\": 0.32 },\n      { \"asset_class\": \"Stocks\", \"weight\": 0.66 },\n      { \"asset_class\": \"Cash\", \"weight\": 0.02 }\n    ],\n    \"can_go_negative\": false,\n    \"allow_cash_fallback\": false,\n    \"bucket_type\": \"taxable\"\n  },\n  \"Tax-Deferred\": {\n    \"holdings\": [\n      { \"asset_class\": \"Stocks\", \"weight\": 0.9 },\n      { \"asset_class\": \"Fixed-Income\", \"weight\": 0.05 },\n      { \"asset_class\": \"Cash\", \"weight\": 0.05 }\n    ],\n    \"can_go_negative\": false,\n    \"allow_cash_fallback\": false,\n    \"bucket_type\": \"tax_deferred\"\n  },\n  \"Tax-Free\": {\n    \"holdings\": [\n      { \"asset_class\": \"Stocks\", \"weight\": 0.45 },\n      { \"asset_class\": \"Fixed-Income\", \"weight\": 0.45 },\n      { \"asset_class\": \"Cash\", \"weight\": 0.1 }\n    ],\n    \"can_go_negative\": false,\n    \"allow_cash_fallback\": false,\n    \"bucket_type\": \"tax_free\"\n  },\n  \"Health Savings Account\": {\n    \"holdings\": [\n      { \"asset_class\": \"Stocks\", \"weight\": 0.1 },\n      { \"asset_class\": \"Fixed-Income\", \"weight\": 0.85 },\n      { \"asset_class\": \"Cash\", \"weight\": 0.05 }\n    ],\n    \"can_go_negative\": false,\n    \"allow_cash_fallback\": true,\n    \"bucket_type\": \"other\"\n  },\n  \"Vehicles\": {\n    \"holdings\": [{ \"asset_class\": \"Vehicles\", \"weight\": 1.0 }],\n    \"can_go_negative\": false,\n    \"allow_cash_fallback\": false,\n    \"bucket_type\": \"other\"\n  },\n  \"Property\": {\n    \"holdings\": [\n      { \"asset_class\": \"Property\", \"weight\": 1.0, \"cost_basis\": 388000 }\n    ],\n    \"can_go_negative\": false,\n    \"allow_cash_fallback\": false,\n    \"bucket_type\": \"property\"\n  },\n  \"529K\": {\n    \"holdings\": [\n      { \"asset_class\": \"Stocks\", \"weight\": 0.5 },\n      { \"asset_class\": \"Fixed-Income\", \"weight\": 0.5 }\n    ],\n    \"can_go_negative\": false,\n    \"allow_cash_fallback\": true,\n    \"bucket_type\": \"other\"\n  },\n  \"SEPP IRA\": {\n    \"holdings\": [\n      { \"asset_class\": \"Fixed-Income\", \"weight\": 0.4 },\n      { \"asset_class\": \"Stocks\", \"weight\": 0.6 }\n    ],\n    \"can_go_negative\": false,\n    \"allow_cash_fallback\": false,\n    \"bucket_type\": \"tax_deferred\"\n  },\n  \"Tax Collection\": {\n    \"holdings\": [{ \"asset_class\": \"Cash\", \"weight\": 1.0 }],\n    \"can_go_negative\": false,\n    \"allow_cash_fallback\": true,\n    \"bucket_type\": \"other\"\n  }\n}\n</code></pre>"},{"location":"configuration/#buckets-field-definitions","title":"\ud83d\udd11 Buckets Field Definitions","text":"<p>Buckets represent your accounts and how money flows through them. Each field defines how the system treats that bucket:  </p> <ul> <li><code>holdings</code> \u2192 how your money is invested (stocks, bonds, cash).  <ul> <li>Optional: <code>cost_basis</code> for property or assets where IRS rules require tracking.  </li> </ul> </li> <li><code>can_go_negative</code> \u2192 whether the bucket can dip below zero (e.g., overdraft in Cash).  </li> <li><code>allow_cash_fallback</code> \u2192 whether the system automatically pulls from Cash if another bucket runs short.  </li> <li><code>bucket_type</code> \u2192 tells the system what kind of bucket this is:  <ul> <li><code>cash</code> \u2192 liquid money you can spend immediately.  </li> <li><code>taxable</code> \u2192 brokerage or CD ladder accounts.  </li> <li><code>tax_deferred</code> \u2192 retirement accounts (401k, IRA, SEPP IRA).  </li> <li><code>tax_free</code> \u2192 Roth accounts.  </li> <li><code>property</code> \u2192 real estate holdings with explicit cost basis.  </li> <li><code>other</code> \u2192 vehicles, HSAs, 529K, or miscellaneous accounts.  </li> </ul> </li> </ul>"},{"location":"configuration/#buckets-audit-notes","title":"\ud83e\uddfe Buckets Audit Notes","text":"<p>Behind the scenes, Nomad Wealth ensures your buckets are modeled consistently and IRS\u2011aligned:  </p> <ul> <li>Buckets are initialized from your starting balances (<code>balance.csv</code>).  </li> <li>The system corrects rounding drift automatically when allocating holdings.  </li> <li>A Tax Collection bucket is always present to handle withholding and settlement.  </li> <li>Property buckets should include <code>cost_basis</code> to stay IRS\u2011compliant.  </li> <li>Cash buckets can allow negative balances to realistically model overdrafts.  </li> </ul>"},{"location":"configuration/#policies","title":"Policies","text":"<p>Policies define how income, withdrawals, and conversions happen in your plan \u2014 from salary and Social Security to Roth conversions and property flows.  </p> <p>Example (<code>policies.json</code>):</p> <pre><code>{\n  \"Refill\": {\n    \"Thresholds\": { \"Cash\": 30000 },\n    \"Amounts\": { \"Cash\": 20000 },\n    \"Sources\": { \"Cash\": [\"SEPP IRA\", \"Tax-Deferred\", \"Brokerage\", \"Tax-Free\"] }\n  },\n  \"Liquidation\": {\n    \"Threshold\": -15000,\n    \"Sources\": [\"CD Ladder\", \"Tax-Free\", \"Vehicles\", \"Property\"],\n    \"Targets\": { \"Cash\": 0.2, \"Brokerage\": 0.8 }\n  },\n  \"Salary\": {\n    \"Targets\": { \"Cash\": 0.9, \"Tax-Deferred\": 0.1 },\n    \"Annual Gross Income\": 180000,\n    \"Annual Bonus Month\": \"2026-04\",\n    \"Annual Bonus Amount\": 15000,\n    \"Annual Merit Increase Rate\": 0.025,\n    \"Annual Merit Increase Month\": \"2026-03\",\n    \"Retirement Month\": \"2033-12\"\n  },\n  \"Social Security\": [\n    {\n      \"Profile\": \"p1\",\n      \"DOB\": \"1975-04\",\n      \"Target\": \"Cash\",\n      \"Full Age\": \"67\",\n      \"Full Benefit\": 4058,\n      \"Start Age\": \"67\",\n      \"Percentage Payout\": 0.8\n    },\n    {\n      \"Profile\": \"p2\",\n      \"DOB\": \"1978-07\",\n      \"Target\": \"Cash\",\n      \"Full Age\": \"67\",\n      \"Full Benefit\": 1569,\n      \"Start Age\": \"67\",\n      \"Percentage Payout\": 0.8\n    }\n  ],\n  \"RMD\": {\n    \"Targets\": { \"Cash\": 0.2, \"CD Ladder\": 0.4, \"Brokerage\": 0.4 }\n  },\n  \"Roth Conversions\": {\n    \"early\": {\n      \"Max Tax Rate\": 0.15,\n      \"Max Conversion Amount\": 50000,\n      \"Tax Source Threshold\": 500000,\n      \"Tax Source Name\": \"Brokerage\",\n      \"Allow Conversion\": true,\n      \"Cutoff Age\": 60\n    },\n    \"prime\": {\n      \"Max Tax Rate\": 0.2,\n      \"Max Conversion Amount\": 80000,\n      \"Tax Source Threshold\": 1200000,\n      \"Tax Source Name\": \"Tax-Deferred\",\n      \"Allow Conversion\": true,\n      \"Cutoff Age\": 80\n    },\n    \"late\": {\n      \"Max Tax Rate\": 0.2,\n      \"Max Conversion Amount\": 100000,\n      \"Tax Source Threshold\": 800000,\n      \"Tax Source Name\": \"Tax-Deferred\",\n      \"Allow Conversion\": true,\n      \"Cutoff Age\": 100\n    }\n  },\n  \"SEPP\": {\n    \"Enabled\": false,\n    \"Start Month\": \"2029-10\",\n    \"End Month\": \"2034-09\",\n    \"Interest Rate\": 0.05,\n    \"Source\": \"SEPP IRA\",\n    \"Target\": \"Cash\"\n  },\n  \"Property\": {\n    \"Market Value\": 550000,\n    \"Annual Maintenance\": 0.0075,\n    \"Remaining Principal\": 247102.54,\n    \"Mortgage APR\": 0.05375,\n    \"Monthly Principal and Interest\": 2666.43,\n    \"Monthly Taxes\": 724.0,\n    \"Monthly Insurance\": 169.4,\n    \"Monthly Rent\": 2500\n  },\n  \"Unemployment\": {\n    \"Start Month\": \"2034-01\",\n    \"End Month\": \"2034-07\",\n    \"Monthly Amount\": \"4000\",\n    \"Target\": \"Cash\"\n  }\n}\n</code></pre>"},{"location":"configuration/#policies-field-definitions","title":"\ud83d\udd11 Policies Field Definitions","text":"<p>Policies describe the rules that shape how money flows in your plan \u2014 income, withdrawals, conversions, and special cases. Each section defines how the system applies real\u2011world rules to your buckets:  </p> <ul> <li>Refill \u2192 Keeps your cash balance above a minimum by automatically topping it up from other buckets when needed.  </li> <li>Liquidation \u2192 Defines when assets are sold to cover shortfalls, which buckets are tapped first, and where proceeds go.  </li> <li>Salary \u2192 Models your income stream: base salary, bonuses, annual raises, and when you retire.  </li> <li>Social Security \u2192 Profiles for each person, including date of birth, benefit amounts, and when payouts begin.  </li> <li>RMD (Required Minimum Distribution) \u2192 Specifies how mandatory withdrawals from retirement buckets are distributed.  </li> <li>Roth Conversions \u2192 Rules for converting tax\u2011deferred money into Roth accounts, with limits by age, tax rate, and amount.  </li> <li>SEPP (Substantially Equal Periodic Payments) \u2192 IRS 72(t) withdrawals, including timing, interest rate, and source/target buckets.  </li> <li>Property \u2192 Models real estate: market value, mortgage details, maintenance costs, and rental income.  </li> <li>Unemployment \u2192 Temporary income replacement, including start/end dates and monthly benefit amounts.  </li> </ul>"},{"location":"configuration/#policies-audit-notes","title":"\ud83e\uddfe Policies Audit Notes","text":"<p>Behind the scenes, Nomad Wealth ensures these policies are applied consistently and IRS\u2011aligned:  </p> <ul> <li>Refill and liquidation rules enforce liquidity thresholds so you don\u2019t run out of cash.  </li> <li>Salary and Social Security profiles generate realistic income streams.  </li> <li>RMD and SEPP enforce IRS withdrawal requirements.  </li> <li>Roth conversions model tax\u2011optimized transfers across different phases of retirement.  </li> <li>Property policies integrate mortgage payments, maintenance, and rental flows.  </li> <li>Unemployment policies allow temporary income replacement during gaps.  </li> </ul>"},{"location":"configuration/#tax-brackets","title":"Tax Brackets","text":"<p>Tax brackets ensure your forecasts reflect real IRS rules \u2014 from income and capital gains to Medicare premiums and IRMAA thresholds.  </p> <p>Example (<code>tax_brackets.json</code>):</p> <pre><code>{\n  \"Standard Deduction\": 31500,\n  \"Ordinary\": {\n    \"Federal 2025\": [\n      { \"min_salary\": 0, \"tax_rate\": 0.1 },\n      { \"min_salary\": 22000, \"tax_rate\": 0.12 },\n      { \"min_salary\": 89450, \"tax_rate\": 0.22 },\n      { \"min_salary\": 190750, \"tax_rate\": 0.24 },\n      { \"min_salary\": 364200, \"tax_rate\": 0.32 },\n      { \"min_salary\": 462500, \"tax_rate\": 0.35 },\n      { \"min_salary\": 751600, \"tax_rate\": 0.37 }\n    ],\n    \"Oregon State 2025\": [\n      { \"min_salary\": 0, \"tax_rate\": 0.0475 },\n      { \"min_salary\": 8601, \"tax_rate\": 0.0675 },\n      { \"min_salary\": 21501, \"tax_rate\": 0.0875 },\n      { \"min_salary\": 250000, \"tax_rate\": 0.099 }\n    ],\n    \"Portland Metro SHS 2025\": [{ \"min_salary\": 200000, \"tax_rate\": 0.01 }]\n  },\n  \"Payroll Specific\": {\n    \"Social Security 2025\": [\n      { \"min_salary\": 0, \"tax_rate\": 0.062 },\n      { \"min_salary\": 176100, \"tax_rate\": 0.0 }\n    ],\n    \"Medicare 2025\": [\n      { \"min_salary\": 0, \"tax_rate\": 0.0145 },\n      { \"min_salary\": 200000, \"tax_rate\": 0.0235 }\n    ]\n  },\n  \"Capital Gains\": {\n    \"long_term\": [\n      { \"min_salary\": 0, \"tax_rate\": 0.0 },\n      { \"min_salary\": 89250, \"tax_rate\": 0.15 },\n      { \"min_salary\": 553850, \"tax_rate\": 0.2 }\n    ]\n  },\n  \"Social Security Taxability\": [\n    { \"min_provisional\": 0, \"rate\": 0.0 },\n    { \"min_provisional\": 32000, \"rate\": 0.5 },\n    { \"min_provisional\": 44000, \"rate\": 0.85 }\n  ],\n  \"IRMAA 2025\": [\n    { \"max_magi\": 206000, \"part_b\": 185.0, \"part_d\": 0.0 },\n    { \"max_magi\": 258000, \"part_b\": 259.2, \"part_d\": 12.9 },\n    { \"max_magi\": 322000, \"part_b\": 331.7, \"part_d\": 33.3 },\n    { \"max_magi\": 386000, \"part_b\": 404.2, \"part_d\": 53.8 },\n    { \"max_magi\": 750000, \"part_b\": 476.7, \"part_d\": 74.2 },\n    { \"max_magi\": 999999999, \"part_b\": 549.3, \"part_d\": 81.0 }\n  ],\n  \"Medicare Base Premiums 2025\": {\n    \"part_b\": 174.7,\n    \"part_d\": 30.0\n  }\n}\n</code></pre>"},{"location":"configuration/#tax-brackets-field-definitions","title":"\ud83d\udd11 Tax Brackets Field Definitions","text":"<p>Tax brackets define how income, gains, and premiums are calculated in your plan. They ensure your forecasts reflect real IRS rules and healthcare costs:  </p> <ul> <li>Standard Deduction \u2192 the baseline deduction applied before taxable income is calculated.  </li> <li>Ordinary Income Brackets \u2192 progressive tax brackets for federal, state, and local income taxes.  <ul> <li>Each bracket specifies a minimum income level (<code>min_salary</code>) and the tax rate applied.  </li> </ul> </li> <li>Payroll Taxes \u2192 Social Security and Medicare contributions.  <ul> <li>Social Security is capped at the annual wage base (e.g., $176,100 in 2025).  </li> <li>Medicare includes an additional surtax above certain thresholds.  </li> </ul> </li> <li>Capital Gains \u2192 long\u2011term capital gains brackets layered on top of ordinary income.  </li> <li>Social Security Taxability \u2192 thresholds that determine how much of your Social Security benefits are taxable (0%, 50%, or 85%).  </li> <li>IRMAA (Income\u2011Related Monthly Adjustment Amount) \u2192 Medicare premium adjustments based on your income (Part B and Part D).  </li> <li>Medicare Base Premiums \u2192 the baseline monthly premiums for Medicare coverage.  </li> </ul>"},{"location":"configuration/#tax-brackets-audit-notes","title":"\ud83e\uddfe Tax Brackets Audit Notes","text":"<p>Behind the scenes, Nomad Wealth applies these rules exactly as the IRS does, so your forecasts remain defensible:  </p> <ul> <li>Federal, state, and local brackets are layered to compute total ordinary income tax.  </li> <li>Payroll taxes (Social Security and Medicare) are applied monthly to salary flows.  </li> <li>Capital gains brackets are applied after ordinary income.  </li> <li>Social Security taxability is capped at 85% of provisional income.  </li> <li>IRMAA thresholds adjust Medicare premiums based on your Modified Adjusted Gross Income (MAGI).  </li> <li>The standard deduction reduces taxable income before brackets are applied.  </li> <li>All values are year\u2011specific and must be updated annually to stay compliant.</li> </ul>"},{"location":"configuration/#inflation","title":"Inflation","text":"<p>Inflation profiles make your plan realistic \u2014 healthcare inflates faster than groceries, vehicles depreciate, and property costs rise over time.  </p>"},{"location":"configuration/#example-inflation_ratesjson","title":"Example (<code>inflation_rates.json</code>)","text":"<pre><code>{\n  \"default\": { \"avg\": 0.023, \"std\": 0.02 },\n  \"profiles\": {\n    \"Education\": { \"avg\": 0.045, \"std\": 0.025 },\n    \"Entertainment\": { \"avg\": 0.028, \"std\": 0.02 },\n    \"Food\": { \"avg\": 0.03, \"std\": 0.02 },\n    \"Goods\": { \"avg\": 0.02, \"std\": 0.015 },\n    \"Health\": { \"avg\": 0.035, \"std\": 0.015 },\n    \"Property Insurance\": { \"avg\": 0.05, \"std\": 0.03 },\n    \"Property Maintenance\": { \"avg\": 0.025, \"std\": 0.012 },\n    \"Property Taxes\": { \"avg\": 0.03, \"std\": 0.015 },\n    \"Rent\": { \"avg\": 0.025, \"std\": 0.01 },\n    \"Restaurants\": { \"avg\": 0.033, \"std\": 0.02 },\n    \"Subscriptions\": { \"avg\": 0.02, \"std\": 0.01 },\n    \"Travel\": { \"avg\": 0.035, \"std\": 0.03 },\n    \"Utilities\": { \"avg\": 0.02, \"std\": 0.02 },\n    \"Vehicle Insurance\": { \"avg\": 0.025, \"std\": 0.02 },\n    \"Vehicle Maintenance\": { \"avg\": 0.025, \"std\": 0.015 },\n    \"Voice and Data\": { \"avg\": 0.0075, \"std\": 0.01 }\n  }\n}\n</code></pre>"},{"location":"configuration/#example-inflation_thresholdsjson","title":"Example (<code>inflation_thresholds.json</code>)","text":"<pre><code>{\n  \"Stocks\": { \"low\": 0.015, \"high\": 0.035 },\n  \"Fixed-Income\": { \"low\": 0.01, \"high\": 0.03 },\n  \"Property\": { \"low\": 0.015, \"high\": 0.04 },\n  \"Vehicles\": { \"low\": 0.0, \"high\": 0.0 },\n  \"Cash\": { \"low\": 0.0, \"high\": 0.0 }\n}\n</code></pre>"},{"location":"configuration/#example-gain_tablejson","title":"Example (<code>gain_table.json</code>)","text":"<pre><code>{\n  \"Stocks\": {\n    \"Low\": { \"avg\": 0.004, \"std\": 0.04 },\n    \"Average\": { \"avg\": 0.0065, \"std\": 0.044 },\n    \"High\": { \"avg\": 0.008, \"std\": 0.05 }\n  },\n  \"Fixed-Income\": {\n    \"Low\": { \"avg\": 0.0015, \"std\": 0.0002 },\n    \"Average\": { \"avg\": 0.0025, \"std\": 0.0004 },\n    \"High\": { \"avg\": 0.004, \"std\": 0.0004 }\n  },\n  \"Property\": {\n    \"Low\": { \"avg\": 0.0005, \"std\": 0.0008 },\n    \"Average\": { \"avg\": 0.0025, \"std\": 0.0012 },\n    \"High\": { \"avg\": 0.0025, \"std\": 0.0012 }\n  },\n  \"Vehicles\": {\n    \"Low\": { \"avg\": -0.01, \"std\": 0.0 },\n    \"Average\": { \"avg\": -0.01, \"std\": 0.0 },\n    \"High\": { \"avg\": -0.01, \"std\": 0.0 }\n  },\n  \"Cash\": {\n    \"Low\": { \"avg\": 0.0, \"std\": 0.0 },\n    \"Average\": { \"avg\": 0.0, \"std\": 0.0 },\n    \"High\": { \"avg\": 0.0, \"std\": 0.0 }\n  }\n}\n</code></pre>"},{"location":"configuration/#inflation-field-definitions","title":"\ud83d\udd11 Inflation Field Definitions","text":"<p>Inflation settings make your forecasts realistic by showing how costs rise and assets behave over time:  </p> <ul> <li> <p>default \u2192 baseline inflation assumptions for the overall economy.  </p> <ul> <li><code>avg</code> \u2192 average annual inflation rate.  </li> <li><code>std</code> \u2192 volatility (how much inflation varies year to year).  </li> </ul> </li> <li> <p>profiles \u2192 category\u2011specific inflation for different types of spending or assets.  </p> <ul> <li>Each profile represents a category (e.g., Education, Food, Rent).  </li> <li><code>avg</code> \u2192 typical inflation rate for that category.  </li> <li><code>std</code> \u2192 volatility for that category.  </li> <li>Examples: healthcare inflates faster than groceries, property taxes rise steadily, vehicles depreciate.  </li> </ul> </li> <li> <p>thresholds (<code>inflation_thresholds.json</code>) \u2192 cutoffs that determine which regime applies to each asset class.  </p> <ul> <li>If inflation is below <code>low</code> \u2192 Low regime.  </li> <li>Between <code>low</code> and <code>high</code> \u2192 Average regime.  </li> <li>Above <code>high</code> \u2192 High regime.  </li> </ul> </li> <li> <p>gain table (<code>gain_table.json</code>) \u2192 defines how assets perform under each regime.  </p> <ul> <li><code>avg</code> \u2192 expected monthly return.  </li> <li><code>std</code> \u2192 volatility of returns.  </li> <li>Vehicles are modeled as depreciating assets (negative returns).  </li> <li>Cash is modeled as stable with zero returns.  </li> </ul> </li> </ul>"},{"location":"configuration/#inflation-audit-notes","title":"\ud83e\uddfe Inflation Audit Notes","text":"<p>Behind the scenes, Nomad Wealth applies these rules to keep forecasts defensible and reproducible:  </p> <ul> <li>Default inflation anchors the generator that drives year\u2011by\u2011year adjustments.  </li> <li>Profiles adjust spending categories against the baseline for realism.  </li> <li>Thresholds determine which regime (Low, Average, High) applies to each asset class.  </li> <li>Gain tables provide return distributions for the selected regime.  </li> <li>Each profile produces modifiers applied to transactions (e.g., rent, property maintenance, healthcare).  </li> <li>Ensures category\u2011specific realism (e.g., healthcare inflates faster than goods, vehicles depreciate).  </li> <li>Randomness is seeded per trial so results are reproducible.  </li> <li>All modifiers, thresholds, and gain tables are logged for transparency.</li> </ul>"},{"location":"configuration/#marketplace-premiums","title":"Marketplace Premiums","text":"<p>Marketplace premiums model your monthly healthcare costs, so you can see how insurance affects your retirement outlook.  </p> <p>Example (<code>marketplace_premiums.json</code>):</p> <pre><code>{\n  \"silver_family\": {\n    \"monthly_premium\": 1750\n  },\n  \"silver_couple\": {\n    \"monthly_premium\": 1250\n  }\n}\n</code></pre>"},{"location":"configuration/#marketplace-premiums-field-definitions","title":"\ud83d\udd11 Marketplace Premiums Field Definitions","text":"<p>Marketplace premiums represent your monthly health insurance costs. These values ensure your forecasts account for real, recurring expenses:  </p> <ul> <li>Plan Key \u2192 the name of the plan type (e.g., <code>silver_family</code>, <code>silver_couple</code>).  </li> <li>monthly_premium \u2192 the monthly cost of the plan in dollars.  <ul> <li>Treated as a recurring expense in your forecast.  </li> <li>Can be extended to include other tiers (e.g., <code>silver_individual</code>, <code>gold_family</code>).  </li> </ul> </li> </ul>"},{"location":"configuration/#marketplace-premiums-audit-notes","title":"\ud83e\uddfe Marketplace Premiums Audit Notes","text":"<p>Behind the scenes, Nomad Wealth applies these premiums consistently so your plan reflects reality:  </p> <ul> <li>Premiums are modeled as fixed monthly expenses unless linked to inflation (e.g., healthcare costs rising over time).  </li> <li>Values feed directly into expense transactions and reduce available cash balances.  </li> <li>MAGI values from <code>profile.json</code> interact with IRMAA thresholds, but marketplace premiums are tracked separately.  </li> <li>Premiums should be updated annually to reflect current marketplace rates.  </li> <li>Plan keys must match naming conventions used in transaction logic to avoid misalignment.  </li> </ul>"},{"location":"configuration/#csv-inputs","title":"\ud83d\udcc2 CSV Inputs","text":""},{"location":"configuration/#balances","title":"Balances","text":"<p>Balances seed the simulation with your current bucket values, so forecasts begin from where you are today.  </p> <p>Example (<code>balances.csv</code>):</p> <pre><code>Month,Cash,CD Ladder,Brokerage,Tax-Deferred,Tax-Free,Health Savings Account,Vehicles,Property,529K,SEPP IRA\n2023-01,19678,31757,145633,478275,66656,12017,54580,661474,68434,0\n2023-02,20188,32347,154680,541963,71379,12652,55476,672413,64942,0\n...\n2025-12,23256,73685,182139,793123,136612,33079,81526,1068649,116233,0\n</code></pre>"},{"location":"configuration/#balances-field-definitions","title":"\ud83d\udd11 Balances Field Definitions","text":"<p>Balances define your starting point \u2014 the buckets and assets you hold when the simulation begins. Each column represents one type of bucket:  </p> <ul> <li>Month \u2192 the period of the balance snapshot, in <code>YYYY-MM</code> format.  </li> <li>Cash \u2192 checking and savings accounts, used for expenses, i.e., outflows.  </li> <li>CD Ladder \u2192 certificate of deposit accounts.  </li> <li>Brokerage \u2192 taxable investment accounts.  </li> <li>Tax\u2011Deferred \u2192 retirement accounts like 401(k) or traditional IRA.  </li> <li>Tax\u2011Free \u2192 Roth accounts or other tax\u2011free holdings.  </li> <li>Health Savings Account \u2192 HSA balances for medical expenses.  </li> <li>Vehicles \u2192 depreciating assets such as cars.  </li> <li>Property \u2192 real estate holdings, linked to the Property policy.  </li> <li>529K \u2192 education savings accounts.  </li> <li>SEPP IRA \u2192 IRA designated for Substantially Equal Periodic Payments (IRS 72(t)).  </li> </ul>"},{"location":"configuration/#balances-audit-notes","title":"\ud83e\uddfe Balances Audit Notes","text":"<p>Behind the scenes, Nomad Wealth uses these balances to ensure forecasts are realistic and IRS\u2011aligned:  </p> <ul> <li>The last row of <code>balances.csv</code> seeds the simulation with your starting bucket values.  </li> <li>All bucket names must match those defined in <code>buckets.json</code> for consistency.  </li> <li>Vehicles and Property balances are tracked as assets but modeled with depreciation or mortgage flows.  </li> <li>SEPP IRA balances are critical for IRS 72(t) withdrawal modeling.  </li> <li>FlowTracker records every debit and credit against these balances for transparency.  </li> <li>For reproducibility, balances should align with external statements so forecasts remain defensible.  </li> </ul>"},{"location":"configuration/#fixed-transactions","title":"Fixed Transactions","text":"<p>One\u2011time events like tuition or travel.  </p> <p>Example (<code>fixed.csv</code>):</p> <pre><code>Month,Bucket,Amount,Type,Description\n2026-09,529K,-25000,Education,College Tuition #1\n2027-09,529K,-25000,Education,College Tuition #2\n2028-09,529K,-35000,Education,College Tuition #3\n2029-09,529K,-35000,Education,College Tuition #4\n2026-07,CD Ladder,-10000,Travel,Travel to Japan\n2027-07,CD Ladder,-10000,Travel,Travel to Alaska\n2030-10,CD Ladder,-10000,Travel,Travel to Europe\n2035-10,CD Ladder,-10000,Travel,Travel to SE Asia\n2040-07,CD Ladder,-10000,Travel,Travel to Aus/NZ\n</code></pre>"},{"location":"configuration/#fixed-transactions-field-definitions","title":"\ud83d\udd11 Fixed Transactions Field Definitions","text":"<p>Fixed transactions represent one\u2011time events that occur in a specific month. They help you model major expenses or inflows that don\u2019t repeat regularly:  </p> <ul> <li>Month \u2192 the date of the transaction (<code>YYYY-MM</code>).  </li> <li>Bucket \u2192 the bucket impacted (e.g., <code>529K</code>, <code>CD Ladder</code>).  </li> <li>Amount \u2192 the value of the transaction (negative for expenses, positive for income).  </li> <li>Type \u2192 the category of the transaction (e.g., Education, Travel).  </li> <li>Description \u2192 a human\u2011readable label for clarity (e.g., \u201cCollege Tuition #1\u201d).  </li> </ul>"},{"location":"configuration/#fixed-transactions-audit-notes","title":"\ud83e\uddfe Fixed Transactions Audit Notes","text":"<p>Behind the scenes, Nomad Wealth ensures these one\u2011time events are applied consistently and transparently:  </p> <ul> <li>Fixed transactions are applied once at the specified month.  </li> <li>Amounts reduce or increase balances in the designated bucket.  </li> <li>Categories (Education, Travel) can be linked to inflation profiles for realism (e.g., tuition inflates faster than goods).  </li> <li>FlowTracker logs each transaction so every debit and credit is traceable.  </li> <li>For audit clarity, descriptions should match external records (e.g., tuition invoices, travel receipts).  </li> </ul>"},{"location":"configuration/#recurring-transactions","title":"Recurring Transactions","text":"<p>Ongoing monthly expenses like insurance, utilities, or groceries.  </p> <p>Example (<code>recurring.csv</code>):</p> <pre><code>Start Month,End Month,Bucket,Amount,Type,Description\n2025-09,2029-09,Cash,-290,Vehicle Insurance,Vehicle Insurance\n2029-10,2075-12,Cash,-190,Vehicle Insurance,Vehicle Insurance\n2025-09,2029-09,Cash,-400,Vehicle Maintenance,Vehicle Maintenance\n2029-10,2075-12,Cash,-300,Vehicle Maintenance,Vehicle Maintenance\n2025-09,2029-09,Cash,-140,Entertainment,Entertainment Parks and Rec\n2029-10,2075-12,Cash,-140,Entertainment,Entertainment Parks and Rec\n2025-09,2029-09,Cash,-95,Subscriptions,Entertainment Subscriptions\n2029-10,2075-12,Cash,-95,Subscriptions,Entertainment Subscriptions\n2025-09,2029-09,Cash,-800,Food,Food Groceries\n2029-10,2075-12,Cash,-600,Food,Food Groceries\n2025-09,2029-09,Cash,-200,Restaurants,Food Restaurants\n2029-10,2075-12,Cash,-200,Restaurants,Food Restaurants\n2025-09,2029-09,Cash,-800,Goods,Goods\n2029-10,2075-12,Cash,-600,Goods,Goods\n2025-08,2029-09,Cash,-500,Health,Health Medical Insurance\n2025-08,2029-09,Cash,-15,Health,Health Dental Insurance\n2025-08,2029-09,Cash,-5,Health,Health Vision Insurance\n2025-09,2030-04,Cash,-325,Health,Health Prescriptions etc\n2029-10,2050-04,Health Savings Account,-425,Health,Health Prescriptions etc\n2050-04,2075-12,Health Savings Account,-725,Health,Health Prescriptions etc\n2025-09,2029-09,Cash,-400,Travel,Travel in US\n2029-10,2075-12,Cash,-600,Travel,Travel in US\n2025-09,2075-12,Cash,-345,Utilities,Utils Elec and Gas\n2025-09,2075-12,Cash,-300,Utilities,Utils Waste and Water\n2025-08,2026-12,Cash,-345,Voice and Data,Utils Voice and Data\n2027-01,2075-12,Cash,-250,Voice and Data,Utils Voice and Data\n</code></pre>"},{"location":"configuration/#recurring-transactions-field-definitions","title":"\ud83d\udd11 Recurring Transactions Field Definitions","text":"<p>Recurring transactions represent ongoing monthly expenses or income that repeat over time. They help you capture the rhythm of everyday life in your plan:  </p> <ul> <li>Start Month \u2192 when the transaction begins (<code>YYYY-MM</code>).  </li> <li>End Month \u2192 when the transaction ends (<code>YYYY-MM</code>).  </li> <li>Bucket \u2192 the bucket impacted (e.g., <code>Cash</code>, <code>Health Savings Account</code>).  </li> <li>Amount \u2192 the monthly value (negative for expenses, positive for income).  </li> <li>Type \u2192 the category of the transaction (e.g., Vehicle Insurance, Food, Health, Utilities).  </li> <li>Description \u2192 a clear label for easy tracking (e.g., \u201cHealth Prescriptions\u201d).  </li> </ul>"},{"location":"configuration/#recurring-transactions-audit-notes","title":"\ud83e\uddfe Recurring Transactions Audit Notes","text":"<p>Behind the scenes, Nomad Wealth applies these recurring flows consistently so your forecasts reflect real life:  </p> <ul> <li>All months are stored in <code>YYYY-MM</code> format for monthly precision.  </li> <li>Buckets must be defined consistently across files to avoid mismatches.  </li> <li>Inflation profiles adjust categories over time for realism (e.g., healthcare costs rise faster than groceries).  </li> <li>FlowTracker logs every debit and credit, ensuring transparency and reproducibility.  </li> </ul>"},{"location":"configuration/#related-pages","title":"\ud83d\udcda Related Pages","text":"<ul> <li>Framework Overview </li> <li>Architecture Overview </li> <li>Simulation Logic </li> <li>Visualization Guide </li> <li>Usage Guide </li> <li>See <code>../src/README.md</code> for source code details.  </li> </ul>"},{"location":"overview/","title":"\ud83c\udf10 Framework Overview","text":"<p>Nomad Wealth is a policy\u2011driven financial simulation framework built for transparency, clarity, and confidence. It models retirement scenarios, withdrawal strategies, and tax implications using Monte Carlo simulations and IRS\u2011aligned rules.</p>"},{"location":"overview/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Nomad Wealth helps you plan retirement with confidence by:  </p> <ul> <li>Showing whether your savings are sufficient under uncertainty.  </li> <li>Comparing scenarios with clear percentile overlays and reference lines.  </li> <li>Tracing every dollar across buckets, transactions, and policies.  </li> <li>Ensuring forecasts align with IRS rules and historical data.  </li> <li>Exporting reproducible charts and CSVs you can review or share.  </li> </ul>"},{"location":"overview/#core-components","title":"\ud83e\udde9 Core Components","text":"<p>Nomad Wealth is organized into modular layers:</p> <ul> <li>Configuration \u2192 Define your buckets, policies, and balances.  </li> <li>Architecture \u2192 Behind\u2011the\u2011scenes system design (for advanced users).  </li> <li>Simulation Logic (<code>forecast_engine.py</code>) \u2192 How monthly forecasts and Monte Carlo trials are calculated.  </li> <li>Visualization (<code>visualizations.py</code>) \u2192 Charts and exports that make your plan easy to understand.  </li> <li>Usage \u2192 Options to control forecast size, charts, and exports.  </li> </ul>"},{"location":"overview/#workflow","title":"\ud83d\udcc2 Workflow","text":"<ol> <li>Configure <ul> <li>Set up buckets, balances, and tax rules.  </li> </ul> </li> <li>Simulate <ul> <li>Run Monte Carlo trials that apply monthly transactions, policies, market returns, and taxes.  </li> <li>Results are aggregated into net worth, taxes, balances, and flow logs.  </li> <li>Every debit and credit is tracked for reproducibility.  </li> </ul> </li> <li>Visualize <ul> <li>Generate charts and reports that show whether you\u2019re on track.  </li> <li>Export HTML and CSV outputs with consistent color palettes, percentile overlays, and hover text for clarity.  </li> </ul> </li> </ol>"},{"location":"overview/#irs-alignment","title":"\ud83e\uddfe IRS Alignment","text":"<p>Nomad Wealth enforces IRS rules so your forecasts reflect reality:  </p> <ul> <li>Ordinary income brackets (married filing jointly).  </li> <li>Capital gains layered above ordinary income.  </li> <li>Social Security taxation capped at 85%.  </li> <li>Penalty taxes applied to early withdrawals.  </li> <li>Roth conversions modeled independently.  </li> <li>IRMAA premiums applied based on prior MAGI, doubled for MFJ.  </li> <li>Marketplace premiums capped at 8.5% of prior MAGI.  </li> </ul>"},{"location":"overview/#outputs","title":"\ud83d\udcca Outputs","text":"<p>Nomad Wealth produces:  </p> <ul> <li>Historical Charts \u2192 See how your buckets have grown and changed.  </li> <li>Per\u2011Trial Charts \u2192 Explore detailed monthly forecasts.  </li> <li>Aggregate Monte Carlo Charts \u2192 Understand probabilities and ranges for your retirement outlook.  </li> <li>CSV/HTML Exports \u2192 Download reports for deeper review or sharing.  </li> </ul>"},{"location":"overview/#design-principles","title":"\ud83c\udfaf Design Principles","text":"<ul> <li>Policy\u2011First \u2192 Your plan follows clear, rule\u2011based logic.  </li> <li>Audit Clarity \u2192 Every forecast is traceable, so you can trust the numbers.  </li> <li>Resilience \u2192 Monte Carlo simulations show how your plan holds up under uncertainty.  </li> <li>Transparency \u2192 Charts and reports make it easy to see what\u2019s happening.  </li> <li>Extensibility \u2192 Advanced users can customize rules, but you don\u2019t need to for core planning.  </li> </ul>"},{"location":"overview/#related-pages","title":"\ud83d\udcda Related Pages","text":"<ul> <li>Configuration Reference </li> <li>Architecture Overview </li> <li>Simulation Logic </li> <li>Visualization Guide </li> <li>Usage Guide </li> </ul>"},{"location":"simulation_logic/","title":"\ud83d\udd04 Simulation Logic","text":"<p>Nomad Wealth\u2019s simulation engine models financial flows month by month, applying transactions, policies, market returns, and taxes. This page explains the step\u2011by\u2011step logic of the forecast loop \u2014 how trials are prepared, executed, and turned into charts you can use to understand your retirement outlook.  </p>"},{"location":"simulation_logic/#relationship-to-architecture","title":"\ud83e\udde9 Relationship to Architecture","text":"<p>The simulation logic is the operational core of the system described in Architecture Overview. Where architecture explains the design and components, this page focuses on the execution flow inside the <code>ForecastEngine</code> and <code>app.py</code>.  </p>"},{"location":"simulation_logic/#staging-phase","title":"\ud83d\udcc2 Staging Phase","text":"<p>Before any trial runs, the system prepares your inputs and builds the components that drive the forecast:  </p> <ol> <li>Load Configuration \u2192 reads your JSON and CSV files (buckets, balances, policies, transactions).  </li> <li>Prepare Timeframes \u2192 sets up historical and future monthly periods until your chosen end date.  </li> <li>Initialize Components \u2192 builds buckets, applies refill/liquidation rules, sets inflation and tax logic, and wires in transactions like salary, Social Security, property flows, and healthcare premiums.  </li> </ol>"},{"location":"simulation_logic/#monthly-forecast-loop","title":"\ud83d\udcc5 Monthly Forecast Loop","text":"<p>Each month in the simulation follows a clear sequence:  </p> <ol> <li>Apply Transactions \u2192 tuition, travel, insurance, food, utilities, salary, Social Security, Roth conversions, unemployment, property flows.  </li> <li>Trigger Refill Policies \u2192 keeps cash balances above thresholds, prevents early withdrawals, and triggers liquidation if needed.  </li> <li>Apply Market Returns \u2192 updates bucket balances based on inflation\u2011adjusted returns.  </li> <li>Tax Collection Drip \u2192 monthly withholding moves funds into the Tax Collection bucket.  </li> <li>Snapshot Balances \u2192 records bucket balances and logs flows for transparency.  </li> <li>Year\u2011End Settlement \u2192 applies IRS rules for income, gains, and penalties, reconciles taxes, and rolls forward estimates.  </li> </ol>"},{"location":"simulation_logic/#trial-execution","title":"\ud83c\udfb2 Trial Execution","text":"<p>Forecasts are run as Monte Carlo trials to capture uncertainty:  </p> <ul> <li><code>run_one_trial()</code> \u2192 builds buckets, policies, inflation, tax logic, and transactions, then runs the monthly loop.  </li> <li><code>run_simulation()</code> \u2192 wraps each trial and tags results with the trial index.  </li> <li>Parallel Execution \u2192 trials run in parallel for efficiency, with results aggregated by trial index.  </li> </ul>"},{"location":"simulation_logic/#aggregation-phase","title":"\ud83d\udcca Aggregation Phase","text":"<p>After all trials complete, results are combined into clear outputs:  </p> <ul> <li>Net Worth DataFrame \u2192 monthly net worth across trials.  </li> <li>Tax DataFrame \u2192 detailed tax records by trial and year.  </li> <li>Taxable Balances \u2192 balances at SEPP end month for compliance checks.  </li> <li>Monthly Returns \u2192 consolidated returns across trials.  </li> <li>Summary Tracking \u2192 property events and taxable balances logged for transparency.  </li> </ul>"},{"location":"simulation_logic/#visualization-integration","title":"\ud83d\udcc8 Visualization Integration","text":"<p>Aggregated results feed directly into charts and reports:  </p> <ul> <li>Historical Charts \u2192 bucket growth and net worth trajectory.  </li> <li>Per\u2011Trial Charts \u2192 monthly details for expenses, transactions, taxes, and forecasts.  </li> <li>Aggregate Monte Carlo Charts \u2192 probability distributions for returns, balances, taxes, and net worth.  </li> <li>Exports \u2192 all charts available in HTML/CSV with consistent colors, overlays, and hover text.  </li> </ul>"},{"location":"simulation_logic/#forecastengine-notes","title":"\ud83d\udcdd ForecastEngine Notes","text":"<p>The ForecastEngine ensures every forecast is transparent and IRS\u2011aligned:  </p> <ul> <li>Monthly flows integrate buckets, transactions, market gains, refills, liquidations, and taxes.  </li> <li>All results are auditable via structured records: snapshots, tax logs, and return records.  </li> <li>Yearly tax logs reproduce IRS categories (income, gains, Social Security, Roth conversions, penalties).  </li> <li>SEPP withdrawals, marketplace premiums, and IRMAA surcharges are applied correctly.  </li> <li>Roth conversions follow policy\u2011driven thresholds (age cutoffs, balances, tax rates).  </li> <li>Year\u2011end reconciliation ensures taxes are paid from the Tax Collection bucket first, then Cash.  </li> </ul>"},{"location":"simulation_logic/#related-pages","title":"\ud83d\udcda Related Pages","text":"<ul> <li>Architecture Overview \u2192 system design and modular components  </li> <li>Configuration Reference \u2192 JSON and CSV inputs  </li> <li>Visualization Guide \u2192 charts and exports  </li> <li>Usage Guide \u2192 workflow and output files  </li> </ul>"},{"location":"usage/","title":"\ud83d\ude80 Usage Guide","text":"<p>This guide explains how to run Nomad Wealth simulations, adjust settings, and understand the results.  </p>"},{"location":"usage/#running-the-simulation","title":"\u25b6\ufe0f Running the Simulation","text":"<ol> <li> <p>Navigate to the project root    Make sure you\u2019re in the directory containing <code>src/app.py</code>.  </p> </li> <li> <p>Run the entry point </p> </li> </ol> <p><code>bash    python src/app.py</code> </p> <p>This command:    - Loads your configuration files (buckets, balances, policies, taxes).    - Prepares historical and future timelines.    - Runs Monte Carlo trials in parallel to capture uncertainty.    - Aggregates results into clear tables.    - Generates interactive charts and CSV/HTML exports.  </p> <ol> <li>Check the <code>export/</code> directory    All outputs (charts and CSVs) are saved here with timestamped filenames for easy tracking.  </li> </ol>"},{"location":"usage/#controlling-behavior","title":"\u2699\ufe0f Controlling Behavior","text":"<p>You can control how the simulation runs by adjusting flags in <code>app.py</code>:  </p> <ul> <li>Simulation Size \u2192 <code>SIM_SIZE</code> sets the number of Monte Carlo trials.  </li> <li>Example Trials \u2192 <code>SIM_EXAMPLE_SIZE</code> sets how many random trials are shown in detail (expenses, transactions, taxes, forecasts).  </li> <li>Chart Display \u2192 <code>SHOW_*</code> flags decide which charts open interactively (e.g., net worth, examples, historical).  </li> <li>Chart Export \u2192 <code>SAVE_*</code> flags decide which charts are saved to HTML/CSV.  </li> <li>Detailed Mode \u2192 <code>DETAILED_MODE</code> forces all charts and exports to be generated for full transparency.  </li> </ul>"},{"location":"usage/#inputs-required","title":"\ud83d\udcc2 Inputs Required","text":"<p>Nomad Wealth uses configuration files to define your plan:  </p> <ul> <li>profile.json \u2192 birth month, retirement horizon and past MAGI.  </li> <li>buckets.json \u2192 bucket definitions (must align with <code>balance.csv</code>).  </li> <li>balance.csv \u2192 starting balances for each bucket.  </li> <li>policies.json \u2192 rules for income, withdrawals, property, unemployment, Roth conversions.  </li> <li>tax_brackets.json \u2192 IRS\u2011aligned federal, state, payroll, capital gains, IRMAA, Medicare premiums.  </li> <li>inflation_rates.json \u2192 baseline inflation + category profiles.  </li> <li>inflation_thresholds.json + gain_table.json \u2192 asset class return regimes.  </li> <li>marketplace_premiums.json \u2192 healthcare premiums.  </li> <li>fixed.csv \u2192 one\u2011time events (e.g., tuition, travel).  </li> <li>recurring.csv \u2192 ongoing monthly flows (e.g., insurance, food, utilities).  </li> </ul> <p>All inputs must follow the schemas in Configuration Reference.  </p>"},{"location":"usage/#outputs","title":"\ud83d\udcc8 Outputs","text":"<p>Nomad Wealth produces results you can explore in charts and exports:  </p> <ul> <li>Historical Charts \u2192 bucket gains/losses and net worth trajectory.  </li> <li>Per\u2011Trial Example Charts \u2192 detailed views of monthly expenses, transactions, taxes, and forecasts.  </li> <li>Aggregate Monte Carlo Charts \u2192 distributions of returns, balances, taxes, withdrawals, and net worth.  </li> <li>CSV Exports \u2192 tables of balances, tax breakdowns, monthly returns, and flow logs for reproducibility.  </li> </ul>"},{"location":"usage/#notes","title":"\ud83e\uddfe Notes","text":"<ul> <li>Filenames include timestamps (<code>YYYYMMDD_HHMMSS</code>) for traceability.  </li> <li>Net worth = sum of all bucket balances each month.  </li> <li>SEPP rules enforce IRS 72(t) withdrawal compliance.  </li> <li>Roth conversions can occur before age 59.5 if configured.  </li> <li>Logging records export paths for transparency.  </li> <li>Detailed Mode ensures IRS\u2011aligned reproducibility across all charts and exports.  </li> </ul>"},{"location":"usage/#related-pages","title":"\ud83d\udcda Related Pages","text":"<ul> <li>Framework Overview \u2192 conceptual landing page  </li> <li>Configuration Reference \u2192 JSON and CSV schemas  </li> <li>Architecture Overview \u2192 modular system design  </li> <li>Simulation Logic \u2192 monthly forecast loop and aggregation  </li> <li>Visualization Guide \u2192 charts and exports  </li> </ul>"},{"location":"visualization/","title":"\ud83d\udcca Visualization Guide","text":"<p>Nomad Wealth includes a visualization layer that generates interactive Plotly charts and CSV exports. These charts turn complex simulations into clear, intuitive visuals that help you understand your retirement outlook, spot risks, and build confidence in your plan.  </p>"},{"location":"visualization/#monte-carlo-charts","title":"\ud83c\udfb2 Monte Carlo Charts","text":"<p>Monte Carlo charts summarize results across all trials, showing probabilities and ranges. They help you see the \u201cbig picture\u201d of how your plan performs under uncertainty.  </p>"},{"location":"visualization/#net-worth-over-time","title":"Net Worth Over Time","text":"<ul> <li>Method: <code>plot_mc_networth()</code> </li> <li>Purpose: Shows the distribution of net worth outcomes with median trajectory and 15th/85th percentile bands.  </li> <li>How to use it: Look at the median line to see your most likely trajectory. The shaded bands show optimistic and pessimistic scenarios. If the lower band dips below zero, that\u2019s a warning sign for sufficiency risk.  </li> </ul>"},{"location":"visualization/#taxes-and-withdrawal-rates","title":"Taxes and Withdrawal Rates","text":"<ul> <li>Method: <code>plot_mc_totals_and_rates()</code> </li> <li>Purpose: Displays total taxes and withdrawal rates across trials.  </li> <li>How to use it: The withdrawal chart shows whether your spending levels are sustainable \u2014 focus on modeling for lower median withdrawal rates. Use the tax chart to understand how much of your income is lost to taxes over time - focus on modeling for lower median tax rates.</li> <li>Note: This chart is only available in Detailed Mode.</li> </ul>"},{"location":"visualization/#taxable-balances-at-sepp-milestones","title":"Taxable Balances at SEPP Milestones","text":"<ul> <li>Method: <code>plot_mc_taxable_balances()</code> </li> <li>Purpose: Highlights taxable bucket balances at the SEPP end month.  </li> <li>How to use it: Check whether you have enough liquidity in taxable accounts when you turn 59.5 yeas old to avoid early withdrawal penalties - focus on modeling for a higher positive taxable balance according to your risk tolerance.  </li> </ul>"},{"location":"visualization/#monthly-market-returns","title":"Monthly Market Returns","text":"<ul> <li>Method: <code>plot_mc_monthly_returns()</code> </li> <li>Purpose: Shows distributions of monthly returns for property, fixed income, and stocks.  </li> <li>How to use it: Used for transparency to validate the gains and losses of your portfolio, this chart shows the annual inflation rate and scenario per asset type, plus the monthly gains/losses percent and the trial number.</li> <li>Note: This chart is only available in Detailed Mode.</li> </ul>"},{"location":"visualization/#example-trial-charts","title":"\ud83e\uddfe Example Trial Charts","text":"<p>Example trial charts zoom into a single simulation, showing how one possible future unfolds.  </p>"},{"location":"visualization/#bucket-balances-forecast","title":"Bucket Balances Forecast","text":"<ul> <li>Method: <code>plot_example_forecast()</code> </li> <li>Purpose: Forecasted balances over time for each bucket.  </li> <li>How to use it: See how your assets evolve in one trial. This helps you visualize how your model affects different buckets over time and what thresholds you can set to optimize your plan.  </li> </ul>"},{"location":"visualization/#income-and-taxes-breakdown","title":"Income and Taxes Breakdown","text":"<ul> <li>Method: <code>plot_example_income_taxes()</code> </li> <li>Purpose: Annual income and tax breakdowns.  </li> <li>How to use it: Identify which income sources drive your tax liability. This helps you spot opportunities for tax optimization, like Roth conversions or timing withdrawals.</li> </ul>"},{"location":"visualization/#transactions-in-context","title":"Transactions in Context","text":"<ul> <li>Method: <code>plot_example_transactions_in_context()</code> </li> <li>Purpose: Shows transactions alongside bucket balances.  </li> <li>How to use it: Connect spending and inflows directly to changes in balances. This helps you understand the impact of big expenses or income events.</li> <li>Note: This chart is only available in Detailed Mode.</li> </ul>"},{"location":"visualization/#annual-transactions","title":"Annual Transactions","text":"<ul> <li>Method: <code>plot_example_transactions()</code> </li> <li>Purpose: Displays transactions for a given year.  </li> <li>How to use it: Use this chart to better understand income flows to investments and expenses in future years to help you understand your plan.</li> </ul>"},{"location":"visualization/#monthly-expenses","title":"Monthly Expenses","text":"<ul> <li>Method: <code>plot_example_monthly_expenses()</code> </li> <li>Purpose: Visualizes monthly expenses over time.  </li> <li>How to use it: Spot spending patterns and see how inflation or healthcare costs (Medicare, IRMAA) affect your monthly budget.  </li> </ul>"},{"location":"visualization/#historical-charts","title":"\ud83d\udcdc Historical Charts","text":"<p>Historical charts provide context by showing past performance, grounding your forecasts in reality.  </p>"},{"location":"visualization/#monthly-gains-by-bucket","title":"Monthly Gains by Bucket","text":"<ul> <li>Method: <code>plot_historical_bucket_gains()</code> </li> <li>Purpose: Shows monthly gain/loss trends for each bucket.  </li> <li>How to use it: Identify which buckets contributed most to net worth changes. This helps you understand historical strengths and weaknesses in your portfolio.</li> <li>Note: This chart is only available in Detailed Mode.</li> </ul>"},{"location":"visualization/#net-worth-trajectory","title":"Net Worth Trajectory","text":"<ul> <li>Method: <code>plot_historical_balance()</code> </li> <li>Purpose: Net worth line chart with gain/loss bars.  </li> <li>How to use it: See your overall financial trajectory and spot periods of growth or decline. This provides a baseline for comparing future simulations.</li> <li>Note: This chart is only available in Detailed Mode.</li> </ul>"},{"location":"visualization/#flags-modes","title":"\u2699\ufe0f Flags &amp; Modes","text":"<ul> <li><code>SHOW_*</code> flags \u2192 control whether charts are displayed interactively.  </li> <li><code>SAVE_*</code> flags \u2192 control whether charts are exported to HTML/CSV.  </li> <li><code>DETAILED_MODE</code> \u2192 enables full transparency with additional charts and context.  </li> </ul>"},{"location":"visualization/#visualization-notes","title":"\ud83d\udcdd Visualization Notes","text":"<p>Nomad Wealth\u2019s charts are designed for clarity and reproducibility:  </p> <ul> <li>Consistent labels, colors, and formatting across all charts.</li> <li>Percentile overlays (p15, median, p85) make scenario comparisons easy.  </li> <li>CSV/HTML exports preserve interactive and tabular views for sharing or review.  </li> <li>Logging ensures every chart export is traceable.  </li> </ul>"},{"location":"visualization/#related-pages","title":"\ud83d\udcda Related Pages","text":"<ul> <li>Usage Guide \u2192 explains workflow and output files  </li> <li>Architecture Overview \u2192 system design and visualization integration  </li> <li>Simulation Logic \u2192 monthly loop and aggregation steps  </li> </ul>"}]}