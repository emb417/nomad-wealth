# Inflation Forecasting and Portfolio Projections

## Overview

This document outlines the logic implemented for generating inflation forecasts and portfolio projections. The code is designed to simulate future inflation rates and calculate the impact on a portfolio of assets.

## Inflation Forecasting

* The inflation forecasting logic is implemented in the `generate_annual_inflation` function.
* The function takes in a list of forecast years and generates a dictionary of annual inflation rates for each year.
* The inflation rates are generated using a normal distribution with a mean and standard deviation.
* The mean and standard deviation are currently set to 0.03 and 0.02, respectively, but can be adjusted as needed.
* The function uses a random number generator with a fixed seed to ensure reproducibility.

## Inflation Rate Generation

* The inflation rate for each year is generated using the `np.random.normal` function.
* The inflation rate is ensured to be non-negative by using the `max` function.
* The inflation rate is then multiplied by the previous year's inflation rate to calculate the cumulative inflation rate.

## Portfolio Projections

* The portfolio projection logic is implemented in the `balance_df` DataFrame.
* The DataFrame contains the initial portfolio balances for each asset class.
* The inflation rates generated by the `generate_annual_inflation` function are used to calculate the impact on each asset class.

## Inflation Scenarios

* The inflation scenario for each year is determined based on the generated inflation rate.
* The scenario is classified as either 'High', 'Average', or 'Low' based on the inflation rate.

## Asset Class Projections

* Each asset class is projected to grow at a rate based on the inflation scenario and a randomized growth rate.
* The growth rate is randomized using the `gain_table` dictionary, which maps each asset class to a growth rate for each inflation scenario.
* The asset class projections are calculated by multiplying the initial balance by the growth rate and adding the result to the previous year's balance.

## Depreciation

* The depreciation logic is implemented in the `Depreciating` asset class.
* The depreciation rate is currently set to 0.01, but can be adjusted as needed.
* The depreciation is calculated by multiplying the previous year's balance by the depreciation rate and subtracting the result from the previous year's balance.

## Fixed Transactions

* Fixed transactions are applied to specific buckets on specific dates.
* These transactions can either add or subtract from the bucket balance.
* The fixed transactions are defined by a list of dates and corresponding transaction amounts.

## Recurring Transactions

* Recurring transactions are applied to each bucket on a monthly basis within a specified date range.
* These transactions are subtracted from the bucket balance.
* The recurring transactions are defined by a start date, end date, and monthly transaction amount.

## Folder Structure

* `import/`: This folder contains the CSV files for the profile data, balance data, fixed transactions, and recurring transactions.
  * `profile.csv`: The profile data CSV file should contain the following columns: `Name`, `Retirement Date`, `End Date`, `Social Security Date`, `Social Security Amount`, `Social Security Percentage`.
  * `balance.csv`: The balance data CSV file should contain the following columns: `Date`, `Cash`, `Fixed-Income`, `Market`, `Real-Estate`, `Depreciating`, `Post-Education 529K`.
  * `fixed.csv`: The fixed transactions CSV file should contain the following columns: `Date`, `Type`, `Amount`.
  * `recurring.csv`: The recurring transactions CSV file should contain the following columns: `Start Date`, `End Date`, `Type`, `Amount`.
* `export/`: This folder contains the forecasted ledger CSV file and HTML file.

## Notes

* The logic implemented is based on a simplified model and may not reflect real-world market conditions.
* The model assumes that the inflation rate and growth rates are constant over time, which may not be the case in reality.
* The model also assumes that the depreciation rate is constant over time, which may not be the case in reality.

## TODOs

* Add bucket refill strategy
* Add taxes, pay with cash bucket
* Tax implications of withdrawals: When users withdraw from their accounts, there may be tax implications to consider. You could add support for estimating these taxes and incorporating them into the user's projections.
* Add withdrawal strategy
* Add Roth conversion strategy
* Monte Carlo simulations: To help users understand the uncertainty associated with their projections, you could add support for Monte Carlo simulations. This would allow users to see how different scenarios might play out over time.
* Inflation-adjusted expenses for specific categories: While you mentioned that recurring expenses are inflation-adjusted, you might also consider allowing users to specify different inflation rates for specific categories of expenses (e.g., housing, food, transportation).
